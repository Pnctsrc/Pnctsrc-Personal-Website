<template name="posts">
  {{#if queryChange}}
    {{postsReFetch}}
  {{/if}}

  {{#if dataNotReady}}
    {{> post_loader postsDict=postsDict}}
  {{/if}}

  <div class="post_list">
    {{#each post in post_list}}
      <div class="ui fluid card">
        <div class="content">
          <div class="header"><a href="/posts/view/{{post._id}}">{{post.title}}</a></div>
          <div class="right floated meta">
            <span id="post_time"><i class="calendar icon"></i>{{getTime post.createdAt}}</span>
          </div>
          <div class="description">
            <p>{{post.description}}</p>
          </div>
        </div>
        <div class="extra content">
          <div class="left floated meta">
            <span id="post_tag_display">
              <i class="tags icon"></i>
              {{#each tag in post.tags}}
                <a>{{tag}}</a>
              {{/each}}
            </span>
          </div>

          <div class="right floated statistic">
            <div class="value">
              {{getViewCount post.view_count}}
            </div>
            <div class="label">
              Views
            </div>
          </div>
        </div>
      </div>
    {{/each}}
  </div>
  {{#if showPagination}}
    {{> posts_pagination postsDict=postsDict}}
  {{/if}}
</template>
